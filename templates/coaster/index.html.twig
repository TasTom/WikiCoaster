{% extends 'base.html.twig' %}

{% block title %}Liste des Coasters{% endblock %}

{% block body %}
<div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold">üé¢ Coasters</h1>
    {% if is_granted('ROLE_USER') %}
        <a href="{{ path('app_coaster_add') }}" class="btn btn-primary">
            Ajouter un coaster
        </a>
    {% endif %}
</div>

<div class="overflow-x-auto">
    <table class="table table-zebra w-full">
        <thead>
            <tr>
                <th>Nom</th>
                <th>Vitesse max</th>
                <th>Longueur</th>
                <th>Hauteur max</th>
                <th>Parc</th>
                <th>Cat√©gories</th>
                <th>En fonction</th>
                {% if is_granted('ROLE_ADMIN') %}
                    <th>Statut</th>
                {% endif %}
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for coaster in coasters %}
                <tr>
                    <td class="font-bold">{{ coaster.name }}</td>
                    <td>{{ coaster.maxSpeed }} km/h</td>
                    <td>{{ coaster.length }} m</td>
                    <td>{{ coaster.maxHeight }} m</td>
                    <td>{{ coaster.park }}</td>
                    <td>
                        <div class="flex flex-wrap gap-1">
                            {% for category in coaster.categories %}
                                <span class="badge badge-sm" style="background-color: {{ category.color }}; color: white;">
                                    {{ category.name }}
                                </span>
                            {% endfor %}
                        </div>
                    </td>
                    <td>
                        {% if coaster.operating %}
                            <span class="badge badge-success">Oui</span>
                        {% else %}
                            <span class="badge badge-error">Non</span>
                        {% endif %}
                    </td>
                    {% if is_granted('ROLE_ADMIN') %}
                        <td>
                            {% if coaster.published %}
                                <span class="badge badge-success">Publi√©</span>
                            {% else %}
                                <span class="badge badge-warning">Non publi√©</span>
                            {% endif %}
                        </td>
                    {% endif %}
                    <td>
                        <div class="flex gap-2">
                            <a href="{{ path('app_coaster_show', {id: coaster.id}) }}" class="btn btn-sm btn-info">
                                Voir
                            </a>
                            {% if is_granted('COASTER_EDIT', coaster) %}
                                <a href="{{ path('app_coaster_edit', {id: coaster.id}) }}" class="btn btn-sm btn-warning">
                                    Modifier
                                </a>
                                <a href="{{ path('app_coaster_delete', {id: coaster.id}) }}" class="btn btn-sm btn-error">
                                    Supprimer
                                </a>
                            {% endif %}
                        </div>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="{% if is_granted('ROLE_ADMIN') %}9{% else %}8{% endif %}" class="text-center text-gray-500">
                        Aucun coaster trouv√©
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
